"use strict";(self.webpackChunkcalcs=self.webpackChunkcalcs||[]).push([[134],{2134:(S,u,t)=>{t.r(u),t.d(u,{AdminModule:()=>M});var f=t(9e3),l=t(6161),h=t(1135),p=t(7579),a=t(2722),y=t(5750),r=t(4650),C=t(6114),c=t(6895),v=t(1045);function B(o,s){if(1&o&&(r.TgZ(0,"form-render",1),r.ALo(1,"async"),r.qZA()),2&o){const n=r.oxw();r.ekj("dragging",r.lcZ(1,3,n.dragging$)),r.Q6J("formConfig",n.formConfig)}}let g=(()=>{class o{constructor(n,i,d){this.formService=n,this.name=null,this.formConfig=y.qQ,this.initialised$=new h.X(!1),this.destroy$=new p.x,this.name||(this.name=d.snapshot.paramMap.get("name")),i.dropStream$.pipe((0,a.R)(this.destroy$)).subscribe(e=>{if(e.source&&e.target&&e.source!==e.target)if(null===e.index||typeof e.index>"u"){const m=e.target;m.child||(m.child=e.source.child,e.source.child=void 0)}else console.error("drop to groups not supported yet")}),this.dragging$=i.dragging$}ngOnInit(){this.name&&this.formService.get(this.name).pipe((0,a.R)(this.destroy$)).subscribe(n=>{this.formConfig=this.transformBuilderConfig(this.deepCopy(n)),this.initialised$.next(!0)})}ngOnDestroy(){this.destroy$.next(!0)}deepCopy(n){return JSON.parse(JSON.stringify(n))}transformBuilderConfig(n){return n&&n.root&&(n.root=this._transform(n.root)),n}_transform(n){let d=n;return n.child&&(n.child=this._transform(n.child)),d.children&&(d.children=d.children.map(m=>this._transform(m)),d.children.push({type:"build-wrapper"})),{type:"build-wrapper",child:n}}}return o.\u0275fac=function(n){return new(n||o)(r.Y36(f.o),r.Y36(C.j),r.Y36(l.gz))},o.\u0275cmp=r.Xpm({type:o,selectors:[["form-builder"]],inputs:{name:"name"},decls:2,vars:3,consts:[["class","form-builder",3,"formConfig","dragging",4,"ngIf"],[1,"form-builder",3,"formConfig"]],template:function(n,i){1&n&&(r.YNc(0,B,2,5,"form-render",0),r.ALo(1,"async")),2&n&&r.Q6J("ngIf",r.lcZ(1,1,i.initialised$))},dependencies:[c.O5,v.B,c.Ov],encapsulation:2}),o})();const A=[{path:"",component:g},{path:"form-builder/:name",component:g}];let $=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=r.oAB({type:o}),o.\u0275inj=r.cJS({imports:[l.Bz.forChild(A),l.Bz]}),o})();var F=t(1975);let M=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=r.oAB({type:o}),o.\u0275inj=r.cJS({providers:[f.o],imports:[c.ez,F.e,$]}),o})()}}]);